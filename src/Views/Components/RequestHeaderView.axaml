<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:lucide="clr-namespace:LucideAvalonia;assembly=LucideAvalonia"
             xmlns:viewModels="clr-namespace:AvalonHttp.ViewModels"
             xmlns:controls="clr-namespace:AvalonHttp.Controls"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="AvalonHttp.Views.Components.RequestHeaderView"
             x:DataType="viewModels:RequestViewModel">
    <Grid>
        <!-- ============================= -->
        <!-- REQUEST HEADER                -->
        <!-- ============================= -->
        <Border Grid.Row="0"
                Background="{DynamicResource BgElevated}"
                BorderBrush="{DynamicResource BorderColor}"
                BorderThickness="0,0,0,1"
                Padding="20,16">
            <Grid RowDefinitions="Auto, Auto" RowSpacing="12">
                <!-- Request Name -->
                <Grid Grid.Row="0" ColumnDefinitions="Auto, *, Auto, Auto" ColumnSpacing="8">
                    <lucide:Lucide Grid.Column="0" Icon="File" StrokeBrush="{DynamicResource TextSecondary}"
                                   Width="14" Height="14" VerticalAlignment="Center" />
                    <TextBox Grid.Column="1" Text="{Binding Name, Mode=TwoWay}"
                             BorderThickness="0" Background="Transparent"
                             Foreground="{DynamicResource TextPrimary}" FontWeight="Medium" FontSize="13"
                             VerticalAlignment="Center" />

                    <Border Grid.Column="2"
                            Width="6" Height="6"
                            CornerRadius="3"
                            Background="{DynamicResource AccentBrush}"
                            VerticalAlignment="Center"
                            IsVisible="{Binding IsDirty}"
                            ToolTip.Tip="{DynamicResource UnsavedChangesTooltip}" />
                    <!-- Save Button -->
                    <Button Grid.Column="3"
                            Classes="SaveButton"
                            Command="{Binding SaveCurrentRequestCommand}"
                            ToolTip.Tip="{DynamicResource SaveTooltip}">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <lucide:Lucide Icon="Save"
                                           StrokeBrush="{DynamicResource WhiteBrush}"
                                           Width="14" Height="14"
                                           VerticalAlignment="Center" />
                            <TextBlock Text="{DynamicResource SaveButton}"
                                       FontWeight="SemiBold"
                                       FontSize="12"
                                       VerticalAlignment="Center" />
                        </StackPanel>
                    </Button>
                </Grid>
                <!-- Request URL Bar -->
                <Grid Grid.Row="1" ColumnDefinitions="Auto, *, Auto" ColumnSpacing="12">
                    <ComboBox Grid.Column="0" SelectedItem="{Binding SelectedMethod}"
                              ItemsSource="{Binding HttpMethods}" Classes="MethodDropdown"
                              MinWidth="90" />
                    <controls:VariableTextBox Grid.Column="1"
                                              Text="{Binding RequestUrl}"
                                              Watermark="{DynamicResource UrlPlaceholder}"
                                              EnvironmentsViewModel="{Binding EnvironmentsViewModel}"
                                              Classes="UrlInput" />
                    <Button Grid.Column="2" Classes="SendButton"
                            Command="{Binding SendRequestCommand}">
                        <Grid ColumnDefinitions="Auto, Auto" ColumnSpacing="8">
                            <lucide:Lucide Grid.Column="0" Icon="Send" StrokeBrush="{DynamicResource WhiteBrush}" Width="16" Height="16" />
                            <TextBlock Grid.Column="1" Text="{DynamicResource SendButton}" />
                        </Grid>
                    </Button>
                </Grid>
            </Grid>
        </Border>
    </Grid>
</UserControl>
